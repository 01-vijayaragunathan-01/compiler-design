<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Lexical Analyzer – VIJAYARAGUNATHAN P</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #f4f6f9;
      --panel: #ffffff;
      --border: #e0e0e0;
      --text: #1e1e1e;
      --muted: #777;
      --accent: #2563eb;
      --code-bg: #ffffff;
    }

    body.dark {
      --bg: #121212;
      --panel: #1e1e1e;
      --border: #2c2c2c;
      --text: #e5e5e5;
      --muted: #aaa;
      --accent: #3b82f6;
      --code-bg: #181818;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", sans-serif;
      transition: background 0.3s, color 0.3s;
    }

    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    .header {
      background: var(--panel);
      border-bottom: 1px solid var(--border);
      padding: 16px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      font-size: 18px;
      font-weight: 600;
    }

    .toggle {
      position: relative;
      width: 42px;
      height: 22px;
    }

    .toggle input {
      display: none;
    }

    .slider {
      position: absolute;
      inset: 0;
      background: #ccc;
      border-radius: 20px;
      cursor: pointer;
    }

    .slider:before {
      content: "";
      position: absolute;
      width: 18px;
      height: 18px;
      top: 2px;
      left: 2px;
      background: white;
      border-radius: 50%;
      transition: 0.3s;
    }

    input:checked+.slider {
      background: var(--accent);
    }

    input:checked+.slider:before {
      transform: translateX(20px);
    }


    .container {
      display: flex;
      gap: 20px;
      padding: 20px;
      height: calc(100vh - 70px);
    }

 
    .panel {
      flex: 1;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 8px;
      display: flex;
      flex-direction: column;
    }

    .panel-header {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      font-weight: 600;
      font-size: 14px;
      background: var(--panel);
    }


    textarea {
      flex: 1;
      border: none;
      padding: 16px;
      font-family: Consolas, monospace;
      font-size: 14px;
      background: var(--code-bg);
      color: var(--text);
      resize: none;
      outline: none;
    }

   
    .controls {
      padding: 12px 16px;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: flex-end;
    }

    button {
      padding: 8px 16px;
      font-size: 13px;
      border-radius: 6px;
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--text);
      cursor: pointer;
    }

    button.primary {
      background: var(--accent);
      color: white;
      border: none;
    }

    button:hover {
      opacity: 0.9;
    }

    
    .summary {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
    }

    .badge {
      padding: 5px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      margin: 4px 6px 4px 0;
      background: var(--accent);
      color: white;
    }

   
    .table-wrapper {
      flex: 1;
      overflow-y: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    th,
    td {
      padding: 8px 12px;
      border-bottom: 1px solid var(--border);
    }

    th {
      background: var(--panel);
      font-weight: 600;
    }

    td.val {
      font-family: monospace;
    }

  
    footer {
      text-align: center;
      font-size: 13px;
      padding: 16px;
      border-top: 1px solid var(--border);
      color: var(--muted);
    }

    .nav-syntax {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 10px 18px;
      font-size: 13px;
      border-radius: 6px;
      border: none;
      background: var(--accent);
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      z-index: 1000;
    }

    .nav-syntax:hover {
      opacity: 0.9;
    }


    @media (max-width: 900px) {
      .container {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>

  <div class="header">
    <h1>Lexical Analyzer</h1>
    <p>Vijayaragunathan P(RA2311003050321)</p>
    <label class="toggle">
      <input type="checkbox" id="themeToggle">
      <span class="slider"></span>
    </label>
  </div>

  <div class="container">

    <div class="panel">
      <div class="panel-header">Source Code</div>

      <textarea id="code" spellcheck="false">#include &lt;stdio.h&gt;

word = "Python"
for letter in word:
    print(letter)
</textarea>

      <div class="controls">
        <button id="clear">Clear</button>
        <button class="primary" id="run">Tokenize</button>
        <span id="status" style="font-size:13px;color:var(--muted);margin-left:auto;">Ready</span>
      </div>
    </div>


    <div class="panel">
      <div class="panel-header">Tokens</div>

      <div class="summary" id="summary"></div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Type</th>
              <th>Value</th>
              <th>Ln</th>
              <th>Col</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr>
              <td colspan="5" style="text-align:center;color:var(--muted)">
                Click <strong>Tokenize</strong> to analyze code.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>

  <footer>
    Name: <strong>VIJAYARAGUNATHAN P</strong> |
    Reg. No: <strong>RA2311003050321</strong>
  </footer>

  <button class="nav-syntax" onclick="goToSyntax()">
    Go Next →
  </button>

  <script>
    document.getElementById("themeToggle").addEventListener("change", () => {
      document.body.classList.toggle("dark");
    });
  </script>


  <script>
    const KEYWORDS = new Set(["int", "float", "char", "if", "else", "while", "for", "return", "void", "double"]);
    const MULTI_OPS = new Set(["==", "!=", "<=", ">=", "&&", "||", "++", "--", "+=", "-=", "*=", "/=", "->"]);
    const SINGLE_OPS = new Set([..."+-*/=%<>&|!"]);
    const DELIMITERS = new Set([..."(){}[];,"]);

    function tokenize(input) {
      const tokens = [];
      let pos = 0, line = 1, col = 1;

      const cur = () => input[pos];
      const peek = () => input[pos + 1];
      const adv = () => { if (cur() === '\n') { line++; col = 1; } else { col++; } pos++; };
      const add = (type, value, l, c) => tokens.push({ type, value, line: l, column: c });

      while (pos < input.length) {
        while (cur() === ' ' || cur() === '\t' || cur() === '\r') adv();
        if (cur() === '\n') { adv(); continue; }

        const startLine = line, startCol = col;

        if (cur() === '#') {
          let val = '';
          while (cur() && cur() !== '\n') { val += cur(); adv(); }
          add('PREPROCESSOR', val.trim(), startLine, startCol);
          continue;
        }

        if (cur() === '/' && peek() === '/') {
          let val = '';
          while (cur() && cur() !== '\n') { val += cur(); adv(); }
          add('COMMENT', val.trim(), startLine, startCol);
          continue;
        }

        if (/[0-9]/.test(cur())) {
          let num = '', isFloat = false;
          while (/[0-9.]/.test(cur())) {
            if (cur() === '.' && isFloat) break;
            if (cur() === '.') isFloat = true;
            num += cur(); adv();
          }
          add(isFloat ? 'FLOAT' : 'INTEGER', num, startLine, startCol);
          continue;
        }

        if (/[a-zA-Z_]/.test(cur())) {
          let word = '';
          while (/[a-zA-Z0-9_]/.test(cur())) { word += cur(); adv(); }
          add(KEYWORDS.has(word) ? 'KEYWORD' : 'IDENTIFIER', word, startLine, startCol);
          continue;
        }

        if (cur() === '"' || cur() === "'") {
          const quote = cur();
          let val = quote; adv();
          while (cur() && cur() !== quote) {
            if (cur() === '\\') { val += cur(); adv(); }
            val += cur(); adv();
          }
          if (cur() === quote) { val += cur(); adv(); }
          add('STRING', val, startLine, startCol);
          continue;
        }

        if (peek() && MULTI_OPS.has(cur() + peek())) {
          add('OPERATOR', cur() + peek(), startLine, startCol); adv(); adv(); continue;
        }

        if (SINGLE_OPS.has(cur())) { add('OPERATOR', cur(), startLine, startCol); adv(); continue; }
        if (DELIMITERS.has(cur())) { add('DELIMITER', cur(), startLine, startCol); adv(); continue; }

        if (cur()) {
          add('UNKNOWN', cur(), startLine, startCol); adv();
        }
      }

      return tokens;
    }

    function render(tokens) {
      const tbody = document.getElementById('tbody');
      const summary = document.getElementById('summary');
      tbody.innerHTML = '';
      summary.innerHTML = '';

      const countMap = {};
      tokens.forEach(t => countMap[t.type] = (countMap[t.type] || 0) + 1);
      for (let [type, count] of Object.entries(countMap)) {
        const span = document.createElement('span');
        span.className = 'badge ' + type;
        span.textContent = `${type}: ${count}`;
        summary.appendChild(span);
      }

      tokens.forEach((t, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${i + 1}</td><td>${t.type}</td><td class="val">${t.value}</td><td>${t.line}</td><td>${t.column}</td>`;
        tbody.appendChild(tr);
      });
    }

    document.getElementById('run').onclick = () => {
      const input = document.getElementById('code').value;
      const tokens = tokenize(input);
      render(tokens);
      document.getElementById('status').textContent = `Done — ${tokens.length} tokens`;
    };

    document.getElementById('clear').onclick = () => {
      document.getElementById('code').value = '';
      document.getElementById('tbody').innerHTML = '<tr><td colspan="5" style="text-align:center;color:var(--muted)">Click <strong>Tokenize</strong> to analyze code.</td></tr>';
      document.getElementById('summary').innerHTML = '';
      document.getElementById('status').textContent = 'Ready';
    };

    function goToSyntax() {
      document.body.style.opacity = "0.5";
      setTimeout(() => {
        window.location.href = "simulation1.html";
      }, 200);
    }
  </script>
</body>

</html>